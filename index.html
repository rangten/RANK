
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>RankML - Ranking de Anúncios</title>
    <script>
        async function buscarRanking() {
            const termo = document.getElementById('produto').value;
            try {
                const res = await fetch(`https://api.mercadolibre.com/sites/MLB/search?q=${encodeURIComponent(termo)}`);
                const data = await res.json();
                const results = data.results;
                let html = '<h3>Top 10 Anúncios</h3><ol>';
                results.slice(0, 10).forEach(item => {
                    html += `<li>${item.title} - R$ ${item.price}</li>`;
                });
                html += '</ol>';
                document.getElementById('output').innerHTML = html;
            } catch (error) {
                document.getElementById('output').innerText = 'Erro ao buscar: ' + error.message;
            }
        }

        async function verPosicao() {
            const termo = document.getElementById('produto').value;
            const url = document.getElementById('url').value;
            try {
                const res = await fetch(`https://api.mercadolibre.com/sites/MLB/search?q=${encodeURIComponent(termo)}`);
                const data = await res.json();
                const results = data.results;
                const match = results.findIndex(item => url.includes(item.id));
                document.getElementById('output').innerText = match >= 0 ? `Seu anúncio está na posição ${match + 1}` : 'Anúncio não encontrado nas primeiras 50 posições.';
            } catch (error) {
                document.getElementById('output').innerText = 'Erro ao verificar posição: ' + error.message;
            }
        }
    </script>
</head>
<body style="font-family:sans-serif; padding:20px;">
    <h1>RankML - Ranking de Anúncios</h1>
    <label>Digite o produto para ranking:</label><br>
    <input type="text" id="produto" style="width:300px;"><br><br>

    <label>Cole o link ou ID do seu anúncio:</label><br>
    <input type="text" id="url" style="width:300px;"><br><br>

    <button onclick="buscarRanking()">Buscar Ranking</button>
    <button onclick="verPosicao()">Ver Posição</button>
    <hr>
    <div id="output" style="margin-top:20px;"></div>
</body>
</html>
